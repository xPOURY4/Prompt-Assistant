# 🔧 راهنمای یکپارچه‌سازی API - پرامپت اسیستنت

نحوه یکپارچه‌سازی و بهینه‌سازی استفاده از Google Gemini API با پرامپت اسیستنت را یاد بگیرید، که در [کروم وب استور](https://chromewebstore.google.com/detail/prompt-assistant-ai-promp/khjjnklmccfmbidflahakjameliioidm) موجود است.

## 🔑 راه‌اندازی Google Gemini API

### دریافت کلید API
1. به [Google AI Studio](https://aistudio.google.com/app/apikey) مراجعه کنید
2. با حساب گوگل خود وارد شوید
3. روی **"Create API key"** کلیک کنید
4. کلید API خود را کپی کنید (با "AIza..." شروع می‌شود)
5. آن را ایمن نگه دارید - هرگز علناً به اشتراک نگذارید

### تنظیم کلید API در پرامپت اسیستنت
1. **اکستنشن را باز کنید** از نوار ابزار کروم
2. **روی دکمه کلید API** در هدر کلیک کنید
3. **کلید API خود را بچسبانید** در فیلد ورودی
4. **روی ذخیره کلیک کنید** - کلید شما به صورت محلی و ایمن ذخیره می‌شود
5. **اتصال را تأیید کنید** - زمانی که موفق باشد علامت تیک سبز می‌بینید

## ⚙️ قابلیت‌های API استفاده شده

### تولید سوالات هوشمند
- **نقطه پایانی**: `/v1/models/gemini-2.0-flash:generateContent`
- **هدف**: تولید سوالات زمینه‌ای بر اساس ورودی کاربر
- **ورودی**: توضیح پرامپت اولیه و دسته انتخاب شده
- **خروجی**: ۳-۵ سوال هدفمند برای بهبود پرامپت

### تحلیل پرامپت
- **نقطه پایانی**: `/v1/models/gemini-2.0-flash:generateContent`
- **هدف**: تحلیل کیفیت و اثربخشی پرامپت
- **معیارها**: امتیاز وضوح، رتبه‌بندی دقت، پیشنهادات بهبود
- **لحظه‌ای**: بازخورد فوری همزمان با تایپ

### بهینه‌سازی پرامپت
- **نقطه پایانی**: `/v1/models/gemini-2.0-flash:generateContent`
- **هدف**: بهبود خودکار ساختار و وضوح پرامپت
- **قابلیت‌ها**: بهبود گرامر، تقویت زمینه، بهینه‌سازی فرمت
- **زبان‌ها**: پشتیبانی از بیش از ۱۳ زبان

## 📊 استفاده و محدودیت‌های API

### محدودیت‌های نرخ
- **سطح رایگان**: ۱۵ درخواست در دقیقه
- **سطح پولی**: ۳۰۰ درخواست در دقیقه
- **محدودیت روزانه**: ۱۵۰۰ درخواست (رایگان)، بیش از ۱M (پولی)

### نکات بهینه‌سازی
- **عملیات دسته‌ای**: ترکیب چندین بهینه‌سازی
- **کش کردن**: پرامپت‌های قبلاً تحلیل شده به صورت محلی کش می‌شوند
- **حالت پشتیبان**: قابلیت‌های پایه بدون کلید API کار می‌کنند

### مدیریت هزینه
- **کارآمدی توکن**: پرامپت‌های بهینه شده برای کاهش استفاده از توکن
- **پردازش محلی**: تحلیل پایه به صورت آفلاین کار می‌کند
- **کش هوشمند**: فراخوانی‌های تکراری API را کاهش می‌دهد

## 🔒 امنیت و حریم خصوصی

### رسیدگی به داده‌ها
- **ذخیره محلی**: کلیدهای API فقط در مرورگر شما ذخیره می‌شوند
- **عدم جمع‌آوری داده**: پرامپت‌های شما در سرورهای ما ذخیره نمی‌شوند
- **انتقال رمزگذاری شده**: تمام فراخوانی‌های API از HTTPS استفاده می‌کنند
- **اولویت حریم خصوصی**: سیاست حریم خصوصی Google AI Studio اعمال می‌شود

### بهترین شیوه‌ها
- **چرخش کلیدها**: کلید API خود را به صورت دوره‌ای تغییر دهید
- **نظارت بر استفاده**: کنسول Google Cloud خود را به طور منظم بررسی کنید
- **محدود کردن دامنه**: در صورت امکان از کلیدهای API خاص پروژه استفاده کنید
- **کنترل دسترسی**: مجوزهای کلید API را به سرویس‌های ضروری محدود کنید

### عیب‌یابی مسائل API

**خطاهای احراز هویت**
```
خطا: کلید API معتبر نیست
```
- فرمت کلید را تأیید کنید (با "AIza..." شروع می‌شود)
- بررسی کنید که Gemini API در کنسول Google Cloud فعال باشد
- اطمینان حاصل کنید که پروژه Google Cloud شما صورتحساب فعال دارد

**تجاوز از محدودیت نرخ**
```
خطا: سهمیه تجاوز شده
```
- منتظر بازنشانی محدودیت نرخ بمانید (۱ دقیقه)
- به طرح پولی ارتقا دهید برای محدودیت‌های بالاتر
- از قابلیت‌های کش برای کاهش فراخوانی‌های API استفاده کنید

**مسائل شبکه**
```
خطا: دریافت ناموفق
```
- اتصال اینترنت را بررسی کنید
- تأیید کنید که فایروال Google APIs را مسدود نکرده
- اکستنشن را تازه‌سازی کنید

## 🛠️ پیکربندی پیشرفته

### تنظیمات API سفارشی
- **Timeout**: تنظیم مهلت درخواست (پیش‌فرض: ۳۰ ثانیه)
- **منطق تلاش مجدد**: تلاش مجدد خودکار در خطاهای موقت
- **حالت پشتیبان**: کاهش تدریجی و ایمن بدون API

### بهینه‌سازی عملکرد
- **دسته‌بندی درخواست‌ها**: ترکیب چندین عملیات
- **کش هوشمند**: کش پاسخ‌های پرکاربرد
- **فشرده‌سازی**: کمینه‌سازی اندازه payload

## 📈 نظارت و تحلیل

### ردیابی استفاده
- **تعداد درخواست‌ها**: نظارت بر استفاده روزانه API
- **زمان پاسخ**: ردیابی عملکرد API
- **نرخ خطا**: شناسایی و حل مسائل
- **تحلیل هزینه**: بهینه‌سازی برای کارایی بودجه

### بررسی سلامت
- **دسترسی API**: تست‌های منظم اتصال
- **اعتبارسنجی کلید**: تأیید دوره‌ای احراز هویت
- **معیارهای عملکرد**: نظارت بر زمان پاسخ

## 🔄 عملیات پیشرفته

### استراتژی‌های کش
- **کش محلی**: ذخیره پاسخ‌های پرکاربرد
- **مدت انقضا**: تنظیم زمان‌بندی به‌روزرسانی کش
- **اولویت‌بندی**: کش داده‌های پرکاربرد اول

### بهینه‌سازی توکن
- **کاهش توکن**: تکنیک‌هایی برای کاهش مصرف توکن
- **تنظیم طول**: کنترل طول پرامپت‌ها و پاسخ‌ها
- **تحلیل کارایی**: نظارت بر مصرف توکن در فراخوانی‌ها

## 🎯 موارد استفاده پیشرفته

### پردازش دسته‌ای
- **تحلیل چندین پرامپت**: پردازش همزمان چندین پرامپت
- **بهینه‌سازی انبوه**: بهبود دسته‌ای پرامپت‌ها
- **خروجی ساختاریافته**: فرمت‌بندی نتایج برای پردازش اتوماتیک

### یکپارچه‌سازی سفارشی
- **API سطح بالا**: اتصال با سیستم‌های پیچیده
- **Webhook**: پیکربندی اعلان‌های بلادرنگ
- **منطق سفارشی**: الگوریتم‌های تصمیم‌گیری پیشرفته

## 📝 مثال‌های عملی

### پیکربندی اولیه
```javascript
// نمونه تنظیم کلید API
const apiKey = "AIza..."; // کلید API شما
const endpoint = "https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent";
```

### درخواست نمونه
```javascript
// نمونه درخواست تولید سوال
const requestData = {
  "contents": [{
    "parts": [{
      "text": "پرامپت اولیه کاربر و زمینه"
    }]
  }]
};
```

### پردازش پاسخ
```javascript
// پردازش پاسخ API
response.candidates[0].content.parts[0].text;
```

## 🚨 نکات امنیتی مهم

### محافظت از کلید API
- **هرگز در کد سمت کلاینت** کلید API را قرار ندهید
- **استفاده از متغیرهای محیطی** برای ذخیره کلیدها
- **چرخش منظم** کلیدهای API

### کنترل دسترسی
- **اصل کمترین دسترسی**: فقط مجوزهای ضروری
- **نظارت مداوم**: ردیابی استفاده غیرعادی
- **لاگ امنیتی**: ثبت فعالیت‌های مشکوک

### رعایت قوانین
- **سیاست‌های Google**: پیروی از شرایط استفاده
- **قوانین محلی**: رعایت مقررات داده‌های منطقه‌ای
- **حریم خصوصی کاربران**: محافظت از اطلاعات شخصی

## 🌐 پشتیبانی چندزبانه

### تنظیمات زبان
- **زبان درخواست**: تنظیم زبان ورودی
- **زبان پاسخ**: کنترل زبان خروجی
- **تشخیص خودکار**: شناسایی زبان متن

### بهینه‌سازی RTL
- **پشتیبانی فارسی**: تنظیمات ویژه برای زبان‌های RTL
- **ترکیب زبان‌ها**: مدیریت محتوای چندزبانه
- **قالب‌بندی مناسب**: حفظ جهت متن

---

*برای پشتیبانی فنی API، با hexquant@gmail.com تماس بگیرید یا از [x(twitter)](https://x.com/TheTealPourya) بازدید کنید* 
